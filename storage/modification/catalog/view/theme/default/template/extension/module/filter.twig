<div class="panel panel-default">
  <div class="panel-heading">{{ heading_title }}</div>
{# //karapuz (Advanced Filter)  #}
{% if show_price_search %}
{% set price_search_filter = include('/default/template/extension/ka_extensions/ka_adv_filter/price_search_on_filter.twig') %}
{% endif %}
{% set was_filter_image_shown = false %}
{# ///karapuz (Advanced Filter) #}
  <div class="list-group"> {{ price_search_filter }}{{ category_filter }}{% for filter_group in filter_groups %} <a class="list-group-item">{{ filter_group.name }}</a>
{# //karapuz (Advanced Filter)  #}
		{% if filter_group.show_as_image %}
			{% include '/default/template/extension/ka_extensions/ka_adv_filter/filter_image.twig' %}
			{% set was_filter_image_shown = true %}
		{% else %}
{# ///karapuz (Advanced Filter) #}
    <div class="list-group-item">
      <div id="filter-group{{ filter_group.filter_group_id }}">{% for filter in filter_group.filter %}
        <div class="checkbox">
          <label>{% if filter.filter_id in filter_category %}
            <input type="checkbox" name="filter[]" value="{{ filter.filter_id }}" checked="checked" />
            {{ filter.name }}
            {% else %}
            <input type="checkbox" name="filter[]" value="{{ filter.filter_id }}" />
            {{ filter.name }}
            {% endif %}</label>
        </div>
        {% endfor %}</div>
    </div>
{# //karapuz (Advanced Filter)  #}
		{% endif %}
{# ///karapuz (Advanced Filter) #}
    {% endfor %}</div>
  <div class="panel-footer text-right">
{# //karapuz (Advanced Filter)  #}
<style>
#button-reset-filter {
	margin-right: 10px;
}
</style>
    <button type="button" id="button-reset-filter" onclick="onResetFilter();" class="btn text-left btn-secondary">{{ txt_reset }}</button>
{# ///karapuz (Advanced Filter) #}
    <button type="button" id="button-filter" class="btn btn-primary">{{ button_filter }}</button>
  </div>
</div>
<script type="text/javascript"><!--
{# //karapuz (Advanced Filter)  #}
$('#column-left').removeClass('hidden-xs');

function onResetFilter() {

	location = '{{ action }}';
	
}
{# ///karapuz (Advanced Filter) #}
$('#button-filter').on('click', function() {
	filter = [];
{# //karapuz (Advanced Filter)  #}
	var filter_params = '';
	var category_id = $("#filter-category-id").val();
	if (category_id) {
		filter_params += '&category_id=' + category_id;
	}
	if ($('#filter-subcategory:checked').length) {
		filter_params += '&sub_category=1';
	}
{# ///karapuz (Advanced Filter) #}

	$('input[name^=\'filter\']:checked').each(function(element) {
		filter.push(this.value);
	});

{# //karapuz (Advanced Filter)  #}
	var filter_price = '';
	var price_from_input = $('#price_from').val();
	var price_to_input = $('#price_to').val();
	
	if (price_from_input > 0 || price_to_input > 0) {
		filter_price += '&filter_price=' + encodeURIComponent(price_from_input) + '-' + encodeURIComponent(price_to_input);
	}
{# ///karapuz (Advanced Filter) #}
	location = '{{ action }}&filter=' + filter.join(',') + filter_params + filter_price;
});
//--></script> 
